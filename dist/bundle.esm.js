import{createRenderer as r,combineRules as t}from"fela";import{renderToMarkup as n,rehydrate as e,render as u}from"fela-dom";import o from"fela-plugin-embedded";import i from"fela-plugin-prefixer";import c from"fela-plugin-fallback-value";import a from"fela-plugin-unit";var f=function(){return(f=Object.assign||function(r){for(var t,n=1,e=arguments.length;n<e;n++)for(var u in t=arguments[n])Object.prototype.hasOwnProperty.call(t,u)&&(r[u]=t[u]);return r}).apply(this,arguments)};var s,p,l,h=function(r){return r.replace(/-(\w)/gu,function(r,t){return t.toUpperCase()})},d=function(r){var t,n=!1;return function(){return n?t:(n=!0,t=r())}},y=(s=/url\(.*?\)/g,p=/[,:;]/g,function(r){return r.replace(s,function(r){return r.replace(p,function(r){return"\\"+r})})}),g=(l=/([^\\])\\([^\\])/g,function(r){return r.replace(l,"$1$2")});function v(r){return null!=r&&"object"==typeof r&&!0===r["@@functional/placeholder"]}function b(r){return function t(n){return 0===arguments.length||v(n)?t:r.apply(this,arguments)}}function m(r){return function t(n,e){switch(arguments.length){case 0:return t;case 1:return v(n)?t:b(function(t){return r(n,t)});default:return v(n)&&v(e)?t:v(n)?b(function(t){return r(t,e)}):v(e)?b(function(t){return r(n,t)}):r(n,e)}}}function w(r,t){switch(r){case 0:return function(){return t.apply(this,arguments)};case 1:return function(r){return t.apply(this,arguments)};case 2:return function(r,n){return t.apply(this,arguments)};case 3:return function(r,n,e){return t.apply(this,arguments)};case 4:return function(r,n,e,u){return t.apply(this,arguments)};case 5:return function(r,n,e,u,o){return t.apply(this,arguments)};case 6:return function(r,n,e,u,o,i){return t.apply(this,arguments)};case 7:return function(r,n,e,u,o,i,c){return t.apply(this,arguments)};case 8:return function(r,n,e,u,o,i,c,a){return t.apply(this,arguments)};case 9:return function(r,n,e,u,o,i,c,a,f){return t.apply(this,arguments)};case 10:return function(r,n,e,u,o,i,c,a,f,s){return t.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function j(r){return function t(n,e,u){switch(arguments.length){case 0:return t;case 1:return v(n)?t:m(function(t,e){return r(n,t,e)});case 2:return v(n)&&v(e)?t:v(n)?m(function(t,n){return r(t,e,n)}):v(e)?m(function(t,e){return r(n,t,e)}):b(function(t){return r(n,e,t)});default:return v(n)&&v(e)&&v(u)?t:v(n)&&v(e)?m(function(t,n){return r(t,n,u)}):v(n)&&v(u)?m(function(t,n){return r(t,e,n)}):v(e)&&v(u)?m(function(t,e){return r(n,t,e)}):v(n)?b(function(t){return r(t,e,u)}):v(e)?b(function(t){return r(n,t,u)}):v(u)?b(function(t){return r(n,e,t)}):r(n,e,u)}}}var O=Array.isArray||function(r){return null!=r&&r.length>=0&&"[object Array]"===Object.prototype.toString.call(r)};function x(r){return"[object String]"===Object.prototype.toString.call(r)}var P=b(function(r){return!!O(r)||!!r&&("object"==typeof r&&(!x(r)&&(1===r.nodeType?!!r.length:0===r.length||r.length>0&&(r.hasOwnProperty(0)&&r.hasOwnProperty(r.length-1)))))}),S=function(){function r(r){this.f=r}return r.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},r.prototype["@@transducer/result"]=function(r){return r},r.prototype["@@transducer/step"]=function(r,t){return this.f(r,t)},r}();var E=m(function(r,t){return w(r.length,function(){return r.apply(t,arguments)})});function k(r,t,n){for(var e=n.next();!e.done;){if((t=r["@@transducer/step"](t,e.value))&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}e=n.next()}return r["@@transducer/result"](t)}function $(r,t,n,e){return r["@@transducer/result"](n[e](E(r["@@transducer/step"],r),t))}var A="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";function I(r,t,n){if("function"==typeof r&&(r=function(r){return new S(r)}(r)),P(n))return function(r,t,n){for(var e=0,u=n.length;e<u;){if((t=r["@@transducer/step"](t,n[e]))&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}e+=1}return r["@@transducer/result"](t)}(r,t,n);if("function"==typeof n["fantasy-land/reduce"])return $(r,t,n,"fantasy-land/reduce");if(null!=n[A])return k(r,t,n[A]());if("function"==typeof n.next)return k(r,t,n);if("function"==typeof n.reduce)return $(r,t,n,"reduce");throw new TypeError("reduce: list must be array or iterable")}var N=j(I),z=b(function(r){return function(){return r}});function _(r,t){return function(){return t.call(this,r.apply(this,arguments))}}function q(r,t){return function(){var n=arguments.length;if(0===n)return t();var e=arguments[n-1];return O(e)||"function"!=typeof e[r]?t.apply(this,arguments):e[r].apply(e,Array.prototype.slice.call(arguments,0,n-1))}}var C=b(q("tail",j(q("slice",function(r,t,n){return Array.prototype.slice.call(n,r,t)}))(1,1/0)));var R=b(function(r){return x(r)?r.split("").reverse().join(""):Array.prototype.slice.call(r,0).reverse()});function T(){if(0===arguments.length)throw new Error("compose requires at least one argument");return function(){if(0===arguments.length)throw new Error("pipe requires at least one argument");return w(arguments[0].length,N(_,arguments[0],C(arguments)))}.apply(this,R(arguments))}var F=m(function(r,t){var n=r<0?t.length+r:r;return x(t)?t.charAt(n):t[n]});function U(r){return r}var W,X,B,D,G,H=b(U),J=F(-1),K=m(q("forEach",function(r,t){for(var n=t.length,e=0;e<n;)r(t[e]),e+=1;return t})),L=j(function(r,t,n){return n.replace(r,t)}),M=j(function(r,t,n){return r(n)?t(n):n}),Q=function(r,t){return r.reduce(function(r,n,e){return r+n+(null==t[e]?"":t[e])},"")},V=function(){function r(){this.o={},this.path=[],this.path.push([this.o])}return Object.defineProperty(r.prototype,"out",{get:function(){return this.o},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"depth",{get:function(){return this.path.length},enumerable:!0,configurable:!0}),r.prototype.add=function(r){for(var t=J(this.path),n=[],e=0,u=r;e<u.length;e++)for(var o=u[e],i=0,c=t;i<c.length;i++){var a=c[i];a[o]||(a[o]={}),n.push(a[o])}this.path.push(n)},r.prototype.merge=function(r,t){for(var n=0,e=J(this.path);n<e.length;n++){e[n][r]=t}},r.prototype.pop=function(){return this.path.pop()},r}(),Y=(W=/^([\w-]+)(: *| +)(.*)$/,X=/^(([\|~\$@>\*\.:&\(\)\^="\-\[\]]+).*[ ,]*)+:?$/,B=/\s*,\s*/g,D=/(.*):$/,function(r,t,n){var e;switch(!0){case"{"==t:r.add(n);break;case"}"==t:r.pop();break;case null!=(e=W.exec(t)):r.merge(g(h(e[1])),M(isNaN,g,function(r){switch(r){case"undefined":case"":return;case"null":return null;default:return isNaN(+r)?r:+r}}(e[3])));break;case null!=(e=X.exec(t)):n.splice(0),n.push.apply(n,t.split(B).map(function(t){return"."==(t=t.replace(D,"$1"))[0]&&(t=r.depth>1?"& "+t:t.slice(1)),t}))}}),Z=function(){var r=["\n","\r",";"],t=function(t){return r.includes(t)},n=new RegExp("[^\\\\]("+r.join("|")+")","g"),e=/((^\s*?\/\/.*$)|\/\*(.|[\n\r])*?\*\/)/gm;return function(r){var u=new V,o=[];return T(function(){return u.out},K(function(r){if((r=r.trim())&&Y(u,r,o),u.depth<1)throw new Error("lit-css parse error: unbalanced {} braces !")}),function(r,t){return function(n){for(var e,u,o=r.lastIndex,i=0,c=[];null!==(e=r.exec(n));)u=e[t]||"",c.push(n.slice(i,r.lastIndex-u.length)),i=r.lastIndex;return i<n.length&&c.push(n.slice(i)),r.lastIndex=o,c}}(n,1),L(/(\{|\})/g,function(r,n,e,u){return t(u[e-1])||(n=";"+n),t(u[e+1])||(n+=";"),n}),y,L(e,""))(r)}}(),rr=function(r){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return Z(Q(r,t))},tr=Object.freeze({}),nr=function(){try{return"object"==typeof window}catch(r){return!1}}(),er={method:"f",defStyles:void 0,plugins:[],enhancers:[],preset:{unit:[]},ssr:!1},ur=Object.freeze({f:"function",o:"object",s:"string"}),or=(G=function(r,t){return r[t]||r[h(t)]},function(r,t,n){switch(t||(t=tr),typeof n){case ur.f:return[n];case ur.o:return[z(n)];case ur.s:return function(r,t,n){return n.split(/[,\s\t]+/g).map(function(n){return G(t,n)||G(r(),n)||tr})}(r,t,n).reduce(function(n,e){return n.push.apply(n,or(r,t,e)),n},[]);default:return[H]}}),ir=function(){function s(n){var s,p,l,h;void 0===n&&(n={});var y=f({},er,n),g=y.method,v=y.ssr,b=y.preset,m=y.plugins,w=y.enhancers,j=function(r,t){var n={};for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&t.indexOf(e)<0&&(n[e]=r[e]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var u=0;for(e=Object.getOwnPropertySymbols(r);u<e.length;u++)t.indexOf(e[u])<0&&(n[e[u]]=r[e[u]])}return n}(y,["method","ssr","preset","plugins","enhancers"]),O=f({},er.preset,b||{});if(n.fdef)throw new Error("fela-vue: Change deprecated `fdef` to `defStyles`!");this.renderer=r(f({},j,{enhancers:w,plugins:[o(),i(),c(),a.apply(void 0,O.unit)].concat(m)}));var x,P,S=this.renderer,E=n.defStyles;switch(typeof E){case ur.o:x=(s=[E.key,E.value])[0],P=s[1];break;case ur.f:x=(p=["fdef",E])[0],P=p[1]}nr&&(v?e(S):u(S)),this._mixin={methods:(l={},l[g]=function(r,n){var e=this;return void 0===n&&(n={}),S.renderRule(t.apply(void 0,or(d(function(){return P?P(e):tr}),this.style,r)),n)||void 0},l),computed:E?(h={},h[x]=function(){return P(this)},h):{}}}return Object.defineProperty(s.prototype,"mixin",{get:function(){return Object.freeze(this._mixin)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"style",{get:function(){return n(this.renderer)},enumerable:!0,configurable:!0}),s}();export{ir as Renderer,rr as css};
