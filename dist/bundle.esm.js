import{createRenderer as e,combineRules as r}from"fela";import{renderToMarkup as t,rehydrate as n,render as i}from"fela-dom";import o from"fela-plugin-embedded";import f from"fela-plugin-prefixer";import u from"fela-plugin-fallback-value";import c from"fela-plugin-unit";var a=function(){return(a=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++)for(var i in r=arguments[t])Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i]);return e}).apply(this,arguments)};var s,l,p=function(e){return e},d=function(e){return e.replace(/-(\w)/gu,function(e,r){return r.toUpperCase()})},h=(s=/(}|([}^\n])*?\s*([\w-&>*:]+)[:\s]+(.*?)([\n;]|{|(?=})|$))/g,function(e){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];var n={},i=n,o=[];return function(e,r){for(var t=e.length,n="",i=0;i<t;i++)n+=e[i]+(null==r[i]?"":r[i]);return n}(e,r).replace(s,function(e,r,t,n,f,u,c,a){if("}"==t||"}"==r){if(!o.length)throw new Error("Bad rule: "+a);i=o.pop()}if("{"==u){o.push(i);var s={};i[d(n)]=s,i=s}if(n){var l=n.includes(":");if(f||l){if("."==n[0]&&(n=n.slice(1)),!f&&l){var p=n.split(":");n=p.slice(0,-1).join(":"),f=(h=p)[h.length-1]}else n=n.slice(0,-1);n&&f&&(i[d(n)]=isNaN(f)?f.trim():+f)}}var h;return""}),n}),m=function(){try{return"object"==typeof window}catch(e){return!1}}(),y={method:"f",defStyles:void 0,plugins:[],enhancers:[],preset:{unit:[]},ssr:!1},g=Object.freeze({f:"function",o:"object",s:"string"}),v=(l=function(e,r){return r.split(/[,\s\t]+/g).map(function(r){return function(e,r){return e?e[r]||e[d(r)]:{}}(e,r)})},function(e,r){switch(typeof r){case g.f:return[r];case g.o:return[(t=r,function(){return t})];case g.s:return l(e,r).reduce(function(r,t){return r.push.apply(r,v(e,t)),r},[]);default:return[p]}var t}),b=function(){function s(t){var s,l,p,d;void 0===t&&(t={});var h=a({},y,t),b=h.method,O=h.ssr,w=h.preset,j=h.plugins,x=h.enhancers,P=function(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)r.indexOf(n[i])<0&&(t[n[i]]=e[n[i]])}return t}(h,["method","ssr","preset","plugins","enhancers"]),S=a({},y.preset,w||{});if(t.fdef)throw new Error("fela-vue: Change deprecated `fdef` to `defStyles`!");this.renderer=e(a({},P,{enhancers:x,plugins:[o(),f(),u(),c.apply(void 0,S.unit)].concat(j)}));var k,z,C=this.renderer,E=t.defStyles;switch(typeof E){case g.o:k=(s=[E.key,E.value])[0],z=s[1];break;case g.f:k=(l=["fdef",E])[0],z=l[1]}m&&(O?n(C):i(C)),this._mixin={methods:(p={},p[b]=function(e,t){return void 0===t&&(t={}),C.renderRule(r.apply(void 0,v(this.style,e)),t)},p),computed:E?(d={},d[k]=function(){return z(this)},d):{}}}return Object.defineProperty(s.prototype,"mixin",{get:function(){return Object.freeze(this._mixin)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"style",{get:function(){return t(this.renderer)},enumerable:!0,configurable:!0}),s}();export{b as Renderer,h as css};
