import{createRenderer as e,combineRules as r}from"fela";import{renderToMarkup as n,rehydrate as t,render as o}from"fela-dom";import i from"fela-plugin-embedded";import u from"fela-plugin-prefixer";import c from"fela-plugin-fallback-value";import f from"fela-plugin-unit";var a=function(){return(a=Object.assign||function(e){for(var r,n=1,t=arguments.length;n<t;n++)for(var o in r=arguments[n])Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o]);return e}).apply(this,arguments)};var s,p,l,h,d,g=function(e){return e},m=function(e){return e.replace(/-(\w)/gu,function(e,r){return r.toUpperCase()})},v=function(e){var r,n=!1;return function(){return n?r:(n=!0,r=e())}},y=(s=/^([\w-]+)(: *| +)(.*)$/,p=/^(([@>\*\.:&\(\)\^="\-\[\]]+).*[ ,]*)+:?$/,l=/\s*,\s*/g,h=/(.*):$/,function(e,r,n){var t,o,i=(o=e)[o.length-1];switch(!0){case"{"==r:var u={};n.forEach(function(e){return i[e]=u}),e.push(u);break;case"}"==r:e.pop();break;case null!=(t=s.exec(r)):i[m(t[1])]=isNaN(t[3])?t[3]:+t[3];break;case null!=(t=p.exec(r)):n.splice(0),n.push.apply(n,r.split(l).map(function(r){return"."==(r=r.replace(h,"$1"))[0]&&(r=e.length>1?"& "+r:r.slice(1)),r}))}}),b=function(){var e=["\n","\r",";"],r=function(r){return e.includes(r)},n=new RegExp("["+e.join("")+"]","g");return function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];var i={},u=[],c=[i];return function(e,r){for(var n=e.length,t="",o=0;o<n;o++)t+=e[o]+(null==r[o]?"":r[o]);return t}(e,t).replace(/(\{|\})/g,function(e,n,t,o){return r(o[t-1])||(n=";"+n),r(o[t+1])||(n+=";"),n}).split(n).forEach(function(e){if((e=e.trim())&&y(c,e,u),!c.length)throw new Error("lit-css parse error: unbalanced {} braces !")}),i}}(),w=Object.freeze({}),O=function(){try{return"object"==typeof window}catch(e){return!1}}(),j={method:"f",defStyles:void 0,plugins:[],enhancers:[],preset:{unit:[]},ssr:!1},x=Object.freeze({f:"function",o:"object",s:"string"}),k=(d=function(e,r){return e[r]||e[m(r)]},function(e,r,n){switch(r||(r=w),typeof n){case x.f:return[n];case x.o:return[(t=n,function(){return t})];case x.s:return function(e,r,n){return n.split(/[,\s\t]+/g).map(function(n){return d(r,n)||d(e(),n)||w})}(e,r,n).reduce(function(n,t){return n.push.apply(n,k(e,r,t)),n},[]);default:return[g]}var t}),P=function(){function s(n){var s,p,l,h;void 0===n&&(n={});var d=a({},j,n),g=d.method,m=d.ssr,y=d.preset,b=d.plugins,P=d.enhancers,E=function(e,r){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(n[t]=e[t]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(t=Object.getOwnPropertySymbols(e);o<t.length;o++)r.indexOf(t[o])<0&&(n[t[o]]=e[t[o]])}return n}(d,["method","ssr","preset","plugins","enhancers"]),S=a({},j.preset,y||{});if(n.fdef)throw new Error("fela-vue: Change deprecated `fdef` to `defStyles`!");this.renderer=e(a({},E,{enhancers:P,plugins:[i(),u(),c(),f.apply(void 0,S.unit)].concat(b)}));var $,z,C=this.renderer,N=n.defStyles;switch(typeof N){case x.o:$=(s=[N.key,N.value])[0],z=s[1];break;case x.f:$=(p=["fdef",N])[0],z=p[1]}O&&(m?t(C):o(C)),this._mixin={methods:(l={},l[g]=function(e,n){var t=this;return void 0===n&&(n={}),C.renderRule(r.apply(void 0,k(v(function(){return z?z(t):w}),this.style,e)),n)||void 0},l),computed:N?(h={},h[$]=function(){return z(this)},h):{}}}return Object.defineProperty(s.prototype,"mixin",{get:function(){return Object.freeze(this._mixin)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"style",{get:function(){return n(this.renderer)},enumerable:!0,configurable:!0}),s}();export{P as Renderer,b as css};
