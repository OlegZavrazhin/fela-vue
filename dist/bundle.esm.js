import{createRenderer as e,combineRules as r}from"fela";import{renderToMarkup as t,rehydrate as n,render as o}from"fela-dom";import u from"fela-plugin-embedded";import i from"fela-plugin-prefixer";import f from"fela-plugin-fallback-value";import c from"fela-plugin-unit";import{when as a,complement as p,isNil as s,replace as l,both as h,isEmpty as d,map as g,length as m,last as y,compose as b,forEach as v,identity as O,always as w}from"ramda";
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var j=function(){return(j=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++)for(var o in r=arguments[t])Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o]);return e}).apply(this,arguments)};function x(){for(var e=0,r=0,t=arguments.length;r<t;r++)e+=arguments[r].length;var n=Array(e),o=0;for(r=0;r<t;r++)for(var u=arguments[r],i=0,f=u.length;i<f;i++,o++)n[o]=u[i];return n}var P,$,k,S,N,z,E,C,_,A,I=function(e){return e.replace(/-(\w)/gu,(function(e,r){return r.toUpperCase()}))},R=function(e){var r,t=!1;return function(){return t?r:(t=!0,r=e())}},U=(P=/url\(.*?\)/g,$=/[,:;]/g,function(e){return e.replace(P,(function(e){return e.replace($,(function(e){return"\\"+e}))}))}),q=a(p(s),l(/([^\\])\\([^\\])/g,"$1$2")),B=h(p(d),p(s)),D=function(e,r){return e.reduce((function(e,t,n){return e+t+r[n]}),"")},F=function(){function e(){this.o={},this.path=[],this.path.push([this.o])}return Object.defineProperty(e.prototype,"out",{get:function(){return this.o},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"depth",{get:function(){return this.path.length},enumerable:!0,configurable:!0}),e.prototype.add=function(e){for(var r=y(this.path),t=[],n=0,o=e;n<o.length;n++)for(var u=o[n],i=0,f=r;i<f.length;i++){var c=f[i];c[u]||(c[u]={}),t.push(c[u])}this.path.push(t)},e.prototype.merge=function(e,r){if(B(r)&&B(e))for(var t=0,n=y(this.path);t<n.length;t++){n[t][e]=r}},e.prototype.pop=function(){return this.path.pop()},e}(),G=(k=/^([\w-]+)(: *| +)(.*)$/,S=/^(([\|~\$@>\*\.:&\(\)\^="\-\[\]]+).*[ ,]*)+:?$/,N=/\s*,\s*/g,z=/(.*):$/,function(e,r,t){var n;switch(!0){case"{"==r:e.add(t);break;case"}"==r:e.pop();break;case null!=(n=k.exec(r)):e.merge(q(I(n[1])),a(isNaN,q,function(e){switch(e){case"undefined":case"":return;case"null":return null;default:return isNaN(+e)?e:+e}}(n[3])));break;case null!=(n=S.exec(r)):t.splice(0),t.push.apply(t,r.split(N).map((function(r){return"."==(r=r.replace(z,"$1"))[0]&&(r=e.depth>1?"& "+r:r.slice(1)),r})))}}),H=(E=["\n","\r",";"],C=function(e){return E.includes(e)},_=/(([\s^]+?\/\/.*$)|\/\*(.|[\n\r])*?\*\/)/gm,function(e){var r,t=new F,n=[];return b((function(){return t.out}),v((function(e){if((e=e.trim())&&G(t,e,n),t.depth<1)throw new Error("lit-css parse error: unbalanced {} braces !")})),(r=E,function(e){var t,n,o=g(m,r),u=[],i=0,f=r.length,c=e.length;for(t=0;t<c;t++)for(n=0;n<f;n++)e.slice(t,t+o[n])===r[n]&&"\\"!==e[t-1]&&(u.push(e.slice(i,t)),i=(t+=o[n]-1)+1);return i!==e.length-1&&u.push(e.slice(i)),u}),l(/(\{|\})/g,(function(e,r,t,n){return C(n[t-1])||(r=";"+r),C(n[t+1])||(r+=";"),r})),U,l(_,""))(e)}),J=function(e){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];return H(D(e,r))},K=Object.freeze({}),L=function(){try{return"object"==typeof window}catch(e){return!1}}(),M={method:"f",defStyles:void 0,plugins:[],enhancers:[],preset:{unit:[]},ssr:!1},Q=Object.freeze({f:"function",o:"object",s:"string"}),T=(A=function(e,r){return e[r]||e[I(r)]},function(e,r,t){switch(r||(r=K),typeof t){case Q.f:return[t];case Q.o:return[w(t)];case Q.s:return function(e,r,t){return t.split(/[,\s\t]+/g).map((function(t){return A(r,t)||A(e(),t)||K}))}(e,r,t).reduce((function(t,n){return t.push.apply(t,T(e,r,n)),t}),[]);default:return[O]}}),V=function(){function a(t){var a,p,s,l;void 0===t&&(t={});var h=j(j({},M),t),d=h.method,g=h.ssr,m=h.preset,y=h.plugins,b=h.enhancers,v=function(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)r.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(t[n[o]]=e[n[o]])}return t}(h,["method","ssr","preset","plugins","enhancers"]),O=j(j({},M.preset),m||{});if(t.fdef)throw new Error("fela-vue: Change deprecated `fdef` to `defStyles`!");this.renderer=e(j(j({},v),{enhancers:b,plugins:x([u(),i(),f(),c.apply(void 0,O.unit)],y)}));var w,P,$=this.renderer,k=t.defStyles;switch(typeof k){case Q.o:w=(a=[k.key,k.value])[0],P=a[1];break;case Q.f:w=(p=["fdef",k])[0],P=p[1]}L&&(g?n($):o($)),this._mixin={methods:(s={},s[d]=function(e,t){var n=this;return void 0===t&&(t={}),$.renderRule(r.apply(void 0,T(R((function(){return P?P(n):K})),this.style,e)),t)||void 0},s),computed:k?(l={},l[w]=function(){return P(this)},l):{}}}return Object.defineProperty(a.prototype,"mixin",{get:function(){return Object.freeze(this._mixin)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"style",{get:function(){return t(this.renderer)},enumerable:!0,configurable:!0}),a}();export{V as Renderer,J as css};
