"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var fela=require("fela"),felaDom=require("fela-dom"),embedded=_interopDefault(require("fela-plugin-embedded")),prefixer=_interopDefault(require("fela-plugin-prefixer")),fallback=_interopDefault(require("fela-plugin-fallback-value")),unit=_interopDefault(require("fela-plugin-unit"));function __rest(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&(r[s[n]]=e[s[n]])}return r}const isObject=e=>"object"==typeof e,isBrowser=(()=>{try{return isObject(window)}catch(e){return!1}})(),defaultOpts={method:"f",defStyles:void 0,plugins:[],enhancers:[],preset:{unit:[]},ssr:!1},types=Object.freeze({f:"function",o:"object",s:"string"}),getRules=(()=>{const e=e=>()=>e,t=e=>e;return(r,s)=>{switch(typeof s){case types.f:return[s];case types.o:return[e(s)];case types.s:return((e,t)=>t.split(/[,\s\t]+/g).map(t=>((e,t)=>e?e[t]||e[(e=>e.replace(/-(\w)/gu,(e,t)=>t.toUpperCase()))(t)]:{})(e,t)))(r,s).reduce((e,t)=>(e.push(...getRules(r,t)),e),[]);default:return[t]}}})();class Renderer{get mixin(){return Object.freeze(this._mixin)}get style(){return felaDom.renderToMarkup(this.renderer)}constructor(e={}){const t=Object.assign({},defaultOpts,e),{method:r,ssr:s,preset:n,plugins:i,enhancers:u}=t,l=__rest(t,["method","ssr","preset","plugins","enhancers"]),a=Object.assign({},defaultOpts.preset,n||{});if(e.fdef)throw new Error("fela-vue: Change deprecated `fdef` to `defStyles`!");this.renderer=fela.createRenderer(Object.assign({},l,{enhancers:u,plugins:[embedded(),prefixer(),fallback(),unit(...a.unit),...i]}));const{renderer:f}=this,o=e.defStyles;let p,c;switch(typeof o){case types.o:[p,c]=[o.key,o.value];break;case types.f:[p,c]=["fdef",o]}isBrowser&&(s?felaDom.rehydrate(f):felaDom.render(f)),this._mixin={methods:{[r](e,t={}){return f.renderRule(fela.combineRules(...getRules(this.style,e)),t)}},computed:o?{[p](){return c(this)}}:{}}}}exports.Renderer=Renderer;
