"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var fela=require("fela"),felaDom=require("fela-dom"),embedded=_interopDefault(require("fela-plugin-embedded")),prefixer=_interopDefault(require("fela-plugin-prefixer")),fallback=_interopDefault(require("fela-plugin-fallback-value")),unit=_interopDefault(require("fela-plugin-unit"));const always=e=>()=>e,reflect=e=>e,camelify=e=>e.replace(/-(\w)/gu,(e,r)=>r.toUpperCase()),join=(e,r)=>{const t=e.length;let s="";for(let n=0;n<t;n++)s+=e[n]+(null==r[n]?"":r[n]);return s},css=(()=>{const e=/([}^\n])*?\s*([\w-]+)[:\s]+(.*?)([\n;]|{|(?=})|$)/g;return(r,...t)=>{const s={};let n,l=s;return join(r,t).replace(e,(e,r,t,s,i,u,a)=>{if("{"==i)n=l,l[camelify(t)]=l={};else if("}"==r){if(!n)throw new Error("Bad rule: "+a);l=n,n=null}else l[camelify(t)]=isNaN(s)?s.trim():+s;return""}),s}})(),isObject=e=>"object"==typeof e,isBrowser=(()=>{try{return isObject(window)}catch{return!1}})(),defaultOpts={method:"f",defStyles:void 0,plugins:[],enhancers:[],preset:{unit:[]},ssr:!1},types=Object.freeze({f:"function",o:"object",s:"string"}),getRules=(()=>{const e=(e,r)=>r.split(/[,\s\t]+/g).map(r=>((e,r)=>e?e[r]||e[camelify(r)]:{})(e,r));return(r,t)=>{switch(typeof t){case types.f:return[t];case types.o:return[always(t)];case types.s:return e(r,t).reduce((e,t)=>(e.push(...getRules(r,t)),e),[]);default:return[reflect]}}})();class Renderer{get mixin(){return Object.freeze(this._mixin)}get style(){return felaDom.renderToMarkup(this.renderer)}constructor(e={}){const{method:r,ssr:t,preset:s,plugins:n,enhancers:l,...i}={...defaultOpts,...e},u={...defaultOpts.preset,...s||{}};if(e.fdef)throw new Error("fela-vue: Change deprecated `fdef` to `defStyles`!");this.renderer=fela.createRenderer({...i,enhancers:l,plugins:[embedded(),prefixer(),fallback(),unit(...u.unit),...n]});const{renderer:a}=this,f=e.defStyles;let o,c;switch(typeof f){case types.o:[o,c]=[f.key,f.value];break;case types.f:[o,c]=["fdef",f]}isBrowser&&(t?felaDom.rehydrate(a):felaDom.render(a)),this._mixin={methods:{[r](e,r={}){return a.renderRule(fela.combineRules(...getRules(this.style,e)),r)}},computed:f?{[o](){return c(this)}}:{}}}}exports.Renderer=Renderer,exports.css=css;
