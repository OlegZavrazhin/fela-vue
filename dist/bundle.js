"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var fela=require("fela"),felaDom=require("fela-dom"),embedded=_interopDefault(require("fela-plugin-embedded")),prefixer=_interopDefault(require("fela-plugin-prefixer")),fallback=_interopDefault(require("fela-plugin-fallback-value")),unit=_interopDefault(require("fela-plugin-unit")),__assign=function(){return(__assign=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++)for(var i in r=arguments[t])Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i]);return e}).apply(this,arguments)};function __rest(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)r.indexOf(n[i])<0&&(t[n[i]]=e[n[i]])}return t}var always=function(e){return function(){return e}},reflect=function(e){return e},camelify=function(e){return e.replace(/-(\w)/gu,function(e,r){return r.toUpperCase()})},last=function(e){return e[e.length-1]},join=function(e,r){for(var t=e.length,n="",i=0;i<t;i++)n+=e[i]+(null==r[i]?"":r[i]);return n},css=function(){var e=/(}|([}^\n])*?\s*([\w->*:]+)[:\s]+(.*?)([\n;]|{|(?=})|$))/g;return function(r){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i={},u=i,f=[];return join(r,t).replace(e,function(e,r,t,n,i,s,o,a){if("}"==t||"}"==r){if(!f.length)throw new Error("Bad rule: "+a);u=f.pop()}if("{"==s){f.push(u);var l={};u[camelify(n)]=l,u=l}if(n){var c=n.includes(":");if(i||c){if(!i&&c){var p=n.split(":");n=p.slice(0,-1).join(":"),i=last(p)}else n=n.slice(0,-1);n&&i&&(u[camelify(n)]=isNaN(i)?i.trim():+i)}}return""}),i}}(),isObject=function(e){return"object"==typeof e},isBrowser=function(){try{return isObject(window)}catch(e){return!1}}(),defaultOpts={method:"f",defStyles:void 0,plugins:[],enhancers:[],preset:{unit:[]},ssr:!1},types=Object.freeze({f:"function",o:"object",s:"string"}),getRules=function(){var e=function(e,r){return r.split(/[,\s\t]+/g).map(function(r){return function(e,r){return e?e[r]||e[camelify(r)]:{}}(e,r)})};return function(r,t){switch(typeof t){case types.f:return[t];case types.o:return[always(t)];case types.s:return e(r,t).reduce(function(e,t){return e.push.apply(e,getRules(r,t)),e},[]);default:return[reflect]}}}(),Renderer=function(){function e(e){var r,t,n,i;void 0===e&&(e={});var u=__assign({},defaultOpts,e),f=u.method,s=u.ssr,o=u.preset,a=u.plugins,l=u.enhancers,c=__rest(u,["method","ssr","preset","plugins","enhancers"]),p=__assign({},defaultOpts.preset,o||{});if(e.fdef)throw new Error("fela-vue: Change deprecated `fdef` to `defStyles`!");this.renderer=fela.createRenderer(__assign({},c,{enhancers:l,plugins:[embedded(),prefixer(),fallback(),unit.apply(void 0,p.unit)].concat(a)}));var d,y,g=this.renderer,h=e.defStyles;switch(typeof h){case types.o:d=(r=[h.key,h.value])[0],y=r[1];break;case types.f:d=(t=["fdef",h])[0],y=t[1]}isBrowser&&(s?felaDom.rehydrate(g):felaDom.render(g)),this._mixin={methods:(n={},n[f]=function(e,r){return void 0===r&&(r={}),g.renderRule(fela.combineRules.apply(void 0,getRules(this.style,e)),r)},n),computed:h?(i={},i[d]=function(){return y(this)},i):{}}}return Object.defineProperty(e.prototype,"mixin",{get:function(){return Object.freeze(this._mixin)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return felaDom.renderToMarkup(this.renderer)},enumerable:!0,configurable:!0}),e}();exports.Renderer=Renderer,exports.css=css;
