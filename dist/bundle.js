"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var fela=require("fela"),felaDom=require("fela-dom"),embedded=_interopDefault(require("fela-plugin-embedded")),prefixer=_interopDefault(require("fela-plugin-prefixer")),fallback=_interopDefault(require("fela-plugin-fallback-value")),unit=_interopDefault(require("fela-plugin-unit"));const isBrowser=require("is-browser"),defaultOpts={method:"f",defStyles:void 0,plugins:[],preset:{unit:[]},ssr:!1};class Renderer{get mixin(){return Object.freeze(this._mixin)}get style(){return felaDom.renderToMarkup(this.renderer)}constructor(e={}){const{method:r,ssr:t,plugins:n}=Object.assign({},defaultOpts,e),i=Object.assign({},defaultOpts.preset,e.preset||{});if(e.fdef)throw new Error("fela-vue: Change deprecated `fdef` to `defStyles`!");this.renderer=fela.createRenderer({plugins:[embedded(),prefixer(),fallback(),unit(...i.unit),...n]});const{renderer:s}=this,f=e.defStyles;let l,u;f&&([l,u]={object:[f.key,f.value],function:["fdef",f]}[typeof f]),isBrowser&&(t?felaDom.rehydrate(s):felaDom.render(s)),this._mixin={methods:{[r](e,r={}){const t={function:e,object:()=>e,string:(()=>{const r=this.style&&this.style[e];return{function:r,object:()=>r}[typeof r]||(e=>e)})()}[typeof e];return s.renderRule(t,r)}},computed:f?{[l](){return u(this)}}:{}}}}exports.Renderer=Renderer;
