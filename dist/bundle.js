"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var fela=require("fela"),felaDom=require("fela-dom"),embedded=_interopDefault(require("fela-plugin-embedded")),prefixer=_interopDefault(require("fela-plugin-prefixer")),fallback=_interopDefault(require("fela-plugin-fallback-value")),unit=_interopDefault(require("fela-plugin-unit"));function __rest(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&(r[s[n]]=e[s[n]])}return r}const always=e=>()=>e,reflect=e=>e,camelify=e=>e.replace(/-(\w)/gu,(e,t)=>t.toUpperCase()),last=e=>e[e.length-1],join=(e,t)=>{const r=e.length;let s="";for(let n=0;n<r;n++)s+=e[n]+(null==t[n]?"":t[n]);return s},css=(()=>{const e=/[^\n]\s*([\w-]+)[:\s]+(.+)[$\n]/g;return(t,...r)=>{const s={};return join(t,r).replace(e,(e,t,r)=>(";"==last(r)&&(r=r.slice(0,-1)),s[camelify(t)]=isNaN(r)?r:+r,"")),s}})(),isObject=e=>"object"==typeof e,isBrowser=(()=>{try{return isObject(window)}catch(e){return!1}})(),defaultOpts={method:"f",defStyles:void 0,plugins:[],enhancers:[],preset:{unit:[]},ssr:!1},types=Object.freeze({f:"function",o:"object",s:"string"}),getRules=(()=>{const e=(e,t)=>t.split(/[,\s\t]+/g).map(t=>((e,t)=>e?e[t]||e[camelify(t)]:{})(e,t));return(t,r)=>{switch(typeof r){case types.f:return[r];case types.o:return[always(r)];case types.s:return e(t,r).reduce((e,r)=>(e.push(...getRules(t,r)),e),[]);default:return[reflect]}}})();class Renderer{get mixin(){return Object.freeze(this._mixin)}get style(){return felaDom.renderToMarkup(this.renderer)}constructor(e={}){const t=Object.assign({},defaultOpts,e),{method:r,ssr:s,preset:n,plugins:l,enhancers:a}=t,i=__rest(t,["method","ssr","preset","plugins","enhancers"]),u=Object.assign({},defaultOpts.preset,n||{});if(e.fdef)throw new Error("fela-vue: Change deprecated `fdef` to `defStyles`!");this.renderer=fela.createRenderer(Object.assign({},i,{enhancers:a,plugins:[embedded(),prefixer(),fallback(),unit(...u.unit),...l]}));const{renderer:f}=this,o=e.defStyles;let c,p;switch(typeof o){case types.o:[c,p]=[o.key,o.value];break;case types.f:[c,p]=["fdef",o]}isBrowser&&(s?felaDom.rehydrate(f):felaDom.render(f)),this._mixin={methods:{[r](e,t={}){return f.renderRule(fela.combineRules(...getRules(this.style,e)),t)}},computed:o?{[c](){return p(this)}}:{}}}}exports.Renderer=Renderer,exports.css=css;
