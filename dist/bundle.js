"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var fela=require("fela"),felaDom=require("fela-dom"),embedded=_interopDefault(require("fela-plugin-embedded")),prefixer=_interopDefault(require("fela-plugin-prefixer")),fallback=_interopDefault(require("fela-plugin-fallback-value")),unit=_interopDefault(require("fela-plugin-unit")),__assign=function(){return(__assign=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++)for(var u in r=arguments[t])Object.prototype.hasOwnProperty.call(r,u)&&(e[u]=r[u]);return e}).apply(this,arguments)};function __rest(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var u=0;for(n=Object.getOwnPropertySymbols(e);u<n.length;u++)r.indexOf(n[u])<0&&(t[n[u]]=e[n[u]])}return t}var camelify=function(e){return e.replace(/-(\w)/gu,function(e,r){return r.toUpperCase()})},memoize=function(e){var r,t=!1;return function(){return t?r:(t=!0,r=e())}},splitByGroup=function(e,r){return function(t){for(var n,u,i=e.lastIndex,c=0,o=[];null!==(n=e.exec(t));)u=n[r]||"",o.push(t.slice(c,e.lastIndex-u.length)),c=e.lastIndex;return c<t.length&&o.push(t.slice(c)),e.lastIndex=i,o}},escape=function(){var e=/url\(.*?\)/g,r=/[,:;]/g;return function(t){return t.replace(e,function(e){return e.replace(r,function(e){return"\\"+e})})}}(),unescape=function(){var e=/([^\\])\\([^\\])/g;return function(r){return r.replace(e,"$1$2")}}();function _isPlaceholder(e){return null!=e&&"object"==typeof e&&!0===e["@@functional/placeholder"]}function _curry1(e){return function r(t){return 0===arguments.length||_isPlaceholder(t)?r:e.apply(this,arguments)}}function _curry2(e){return function r(t,n){switch(arguments.length){case 0:return r;case 1:return _isPlaceholder(t)?r:_curry1(function(r){return e(t,r)});default:return _isPlaceholder(t)&&_isPlaceholder(n)?r:_isPlaceholder(t)?_curry1(function(r){return e(r,n)}):_isPlaceholder(n)?_curry1(function(r){return e(t,r)}):e(t,n)}}}function _arity(e,r){switch(e){case 0:return function(){return r.apply(this,arguments)};case 1:return function(e){return r.apply(this,arguments)};case 2:return function(e,t){return r.apply(this,arguments)};case 3:return function(e,t,n){return r.apply(this,arguments)};case 4:return function(e,t,n,u){return r.apply(this,arguments)};case 5:return function(e,t,n,u,i){return r.apply(this,arguments)};case 6:return function(e,t,n,u,i,c){return r.apply(this,arguments)};case 7:return function(e,t,n,u,i,c,o){return r.apply(this,arguments)};case 8:return function(e,t,n,u,i,c,o,a){return r.apply(this,arguments)};case 9:return function(e,t,n,u,i,c,o,a,s){return r.apply(this,arguments)};case 10:return function(e,t,n,u,i,c,o,a,s,l){return r.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function _curry3(e){return function r(t,n,u){switch(arguments.length){case 0:return r;case 1:return _isPlaceholder(t)?r:_curry2(function(r,n){return e(t,r,n)});case 2:return _isPlaceholder(t)&&_isPlaceholder(n)?r:_isPlaceholder(t)?_curry2(function(r,t){return e(r,n,t)}):_isPlaceholder(n)?_curry2(function(r,n){return e(t,r,n)}):_curry1(function(r){return e(t,n,r)});default:return _isPlaceholder(t)&&_isPlaceholder(n)&&_isPlaceholder(u)?r:_isPlaceholder(t)&&_isPlaceholder(n)?_curry2(function(r,t){return e(r,t,u)}):_isPlaceholder(t)&&_isPlaceholder(u)?_curry2(function(r,t){return e(r,n,t)}):_isPlaceholder(n)&&_isPlaceholder(u)?_curry2(function(r,n){return e(t,r,n)}):_isPlaceholder(t)?_curry1(function(r){return e(r,n,u)}):_isPlaceholder(n)?_curry1(function(r){return e(t,r,u)}):_isPlaceholder(u)?_curry1(function(r){return e(t,n,r)}):e(t,n,u)}}}var _isArray=Array.isArray||function(e){return null!=e&&e.length>=0&&"[object Array]"===Object.prototype.toString.call(e)};function _isString(e){return"[object String]"===Object.prototype.toString.call(e)}var _isArrayLike=_curry1(function(e){return!!_isArray(e)||!!e&&("object"==typeof e&&(!_isString(e)&&(1===e.nodeType?!!e.length:0===e.length||e.length>0&&(e.hasOwnProperty(0)&&e.hasOwnProperty(e.length-1)))))}),XWrap=function(){function e(e){this.f=e}return e.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},e.prototype["@@transducer/result"]=function(e){return e},e.prototype["@@transducer/step"]=function(e,r){return this.f(e,r)},e}();function _xwrap(e){return new XWrap(e)}var bind=_curry2(function(e,r){return _arity(e.length,function(){return e.apply(r,arguments)})});function _arrayReduce(e,r,t){for(var n=0,u=t.length;n<u;){if((r=e["@@transducer/step"](r,t[n]))&&r["@@transducer/reduced"]){r=r["@@transducer/value"];break}n+=1}return e["@@transducer/result"](r)}function _iterableReduce(e,r,t){for(var n=t.next();!n.done;){if((r=e["@@transducer/step"](r,n.value))&&r["@@transducer/reduced"]){r=r["@@transducer/value"];break}n=t.next()}return e["@@transducer/result"](r)}function _methodReduce(e,r,t,n){return e["@@transducer/result"](t[n](bind(e["@@transducer/step"],e),r))}var symIterator="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";function _reduce(e,r,t){if("function"==typeof e&&(e=_xwrap(e)),_isArrayLike(t))return _arrayReduce(e,r,t);if("function"==typeof t["fantasy-land/reduce"])return _methodReduce(e,r,t,"fantasy-land/reduce");if(null!=t[symIterator])return _iterableReduce(e,r,t[symIterator]());if("function"==typeof t.next)return _iterableReduce(e,r,t);if("function"==typeof t.reduce)return _methodReduce(e,r,t,"reduce");throw new TypeError("reduce: list must be array or iterable")}var reduce=_curry3(_reduce),always=_curry1(function(e){return function(){return e}});function _pipe(e,r){return function(){return r.call(this,e.apply(this,arguments))}}function _checkForMethod(e,r){return function(){var t=arguments.length;if(0===t)return r();var n=arguments[t-1];return _isArray(n)||"function"!=typeof n[e]?r.apply(this,arguments):n[e].apply(n,Array.prototype.slice.call(arguments,0,t-1))}}var slice=_curry3(_checkForMethod("slice",function(e,r,t){return Array.prototype.slice.call(t,e,r)})),tail=_curry1(_checkForMethod("tail",slice(1,1/0)));function pipe(){if(0===arguments.length)throw new Error("pipe requires at least one argument");return _arity(arguments[0].length,reduce(_pipe,arguments[0],tail(arguments)))}var reverse=_curry1(function(e){return _isString(e)?e.split("").reverse().join(""):Array.prototype.slice.call(e,0).reverse()});function compose(){if(0===arguments.length)throw new Error("compose requires at least one argument");return pipe.apply(this,reverse(arguments))}var nth=_curry2(function(e,r){var t=e<0?r.length+e:e;return _isString(r)?r.charAt(t):r[t]});function _identity(e){return e}var identity=_curry1(_identity),last=nth(-1),forEach=_curry2(_checkForMethod("forEach",function(e,r){for(var t=r.length,n=0;n<t;)e(r[n]),n+=1;return r})),replace=_curry3(function(e,r,t){return t.replace(e,r)}),when=_curry3(function(e,r,t){return e(t)?r(t):t}),join=function(e,r){return e.reduce(function(e,t,n){return e+t+(null==r[n]?"":r[n])},"")},Levels=function(){function e(){this.o={},this.path=[],this.path.push([this.o])}return Object.defineProperty(e.prototype,"out",{get:function(){return this.o},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"depth",{get:function(){return this.path.length},enumerable:!0,configurable:!0}),e.prototype.add=function(e){for(var r=last(this.path),t=[],n=0,u=e;n<u.length;n++)for(var i=u[n],c=0,o=r;c<o.length;c++){var a=o[c];a[i]||(a[i]={}),t.push(a[i])}this.path.push(t)},e.prototype.merge=function(e,r){for(var t=0,n=last(this.path);t<n.length;t++){n[t][e]=r}},e.prototype.pop=function(){return this.path.pop()},e}(),analyseLine=function(){var e=/^([\w-]+)(: *| +)(.*)$/,r=/^(([\|~\$@>\*\.:&\(\)\^="\-\[\]]+).*[ ,]*)+:?$/,t=/\s*,\s*/g,n=/(.*):$/;return function(u,i,c){var o;switch(!0){case"{"==i:u.add(c);break;case"}"==i:u.pop();break;case null!=(o=e.exec(i)):u.merge(unescape(camelify(o[1])),when(isNaN,unescape,function(e){switch(e){case"undefined":case"":return;case"null":return null;default:return isNaN(+e)?e:+e}}(o[3])));break;case null!=(o=r.exec(i)):c.splice(0),c.push.apply(c,i.split(t).map(function(e){return"."==(e=e.replace(n,"$1"))[0]&&(e=u.depth>1?"& "+e:e.slice(1)),e}))}}}(),parse=function(){var e=["\n","\r",";"],r=function(r){return e.includes(r)},t=new RegExp("[^\\\\]("+e.join("|")+")","g"),n=/((^\s*?\/\/.*$)|\/\*(.|[\n\r])*?\*\/)/gm;return function(e){var u=new Levels,i=[];return compose(function(){return u.out},forEach(function(e){if((e=e.trim())&&analyseLine(u,e,i),u.depth<1)throw new Error("lit-css parse error: unbalanced {} braces !")}),splitByGroup(t,1),replace(/(\{|\})/g,function(e,t,n,u){return r(u[n-1])||(t=";"+t),r(u[n+1])||(t+=";"),t}),escape,replace(n,""))(e)}}(),css=function(e){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];return parse(join(e,r))},isObject=function(e){return"object"==typeof e},emptyObject=Object.freeze({}),isBrowser=function(){try{return isObject(window)}catch(e){return!1}}(),defaultOpts={method:"f",defStyles:void 0,plugins:[],enhancers:[],preset:{unit:[]},ssr:!1},types=Object.freeze({f:"function",o:"object",s:"string"}),getRules=function(){var e=function(e,r){return e[r]||e[camelify(r)]};return function(r,t,n){switch(t||(t=emptyObject),typeof n){case types.f:return[n];case types.o:return[always(n)];case types.s:return function(r,t,n){return n.split(/[,\s\t]+/g).map(function(n){return e(t,n)||e(r(),n)||emptyObject})}(r,t,n).reduce(function(e,n){return e.push.apply(e,getRules(r,t,n)),e},[]);default:return[identity]}}}(),Renderer=function(){function e(e){var r,t,n,u;void 0===e&&(e={});var i=__assign({},defaultOpts,e),c=i.method,o=i.ssr,a=i.preset,s=i.plugins,l=i.enhancers,f=__rest(i,["method","ssr","preset","plugins","enhancers"]),p=__assign({},defaultOpts.preset,a||{});if(e.fdef)throw new Error("fela-vue: Change deprecated `fdef` to `defStyles`!");this.renderer=fela.createRenderer(__assign({},f,{enhancers:l,plugins:[embedded(),prefixer(),fallback(),unit.apply(void 0,p.unit)].concat(s)}));var d,h,y=this.renderer,_=e.defStyles;switch(typeof _){case types.o:d=(r=[_.key,_.value])[0],h=r[1];break;case types.f:d=(t=["fdef",_])[0],h=t[1]}isBrowser&&(o?felaDom.rehydrate(y):felaDom.render(y)),this._mixin={methods:(n={},n[c]=function(e,r){var t=this;return void 0===r&&(r={}),y.renderRule(fela.combineRules.apply(void 0,getRules(memoize(function(){return h?h(t):emptyObject}),this.style,e)),r)||void 0},n),computed:_?(u={},u[d]=function(){return h(this)},u):{}}}return Object.defineProperty(e.prototype,"mixin",{get:function(){return Object.freeze(this._mixin)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return felaDom.renderToMarkup(this.renderer)},enumerable:!0,configurable:!0}),e}();exports.Renderer=Renderer,exports.css=css;
